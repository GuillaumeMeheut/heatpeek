function getViewportDeviceCategory(){var e=window.innerWidth;const t=768,n=1024,r=1920;return e<=t?"mobile":e<=n?"tablet":e<=r?"desktop":"large-desktop"}function getUniqueSelector(t){if(t.id)return"#"+CSS.escape(t.id);for(var n=[];t&&t.nodeType===Node.ELEMENT_NODE;){let e=t.nodeName.toLowerCase();t.className&&(i=Array.from(t.classList).map(e=>"."+CSS.escape(e)).join(""),e+=i);var r,i=t.parentElement;i&&1<(r=Array.from(i.children).filter(e=>e.tagName===t.tagName)).length&&(r=r.indexOf(t)+1,e+=`:nth-of-type(${r})`),n.unshift(e),t=t.parentElement}return generateShortHash(n.join(" > "))}function generateShortHash(t){let n=0;for(let e=0;e<t.length;e++){var r=t.charCodeAt(e);n=(n<<5)-n+r,n&=n}return Math.abs(n).toString(36).substring(0,8)}(()=>{let n=document.currentScript.getAttribute("id"),r="https://heatpeek.com/api/e";if(n){let t=getViewportDeviceCategory();if("large-desktop"!==t){let l=0,s=[];function c(){var e;0!==s.length&&(e=JSON.stringify({trackingId:n,url:window.location.href,device:t,events:s.splice(0,s.length)}),navigator.sendBeacon?navigator.sendBeacon(r,e):fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:e}).catch(e=>{console.error("Heatpeek: Error sending click data:",e)}))}setInterval(c,5e3),window.addEventListener("beforeunload",c),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&c()}),document.addEventListener("click",e=>{var t,n,r,i,o,a,d=Date.now();d-l<500||(l=d,i=(d=e.target).getBoundingClientRect(),t=Math.round(i.left+window.scrollX),n=Math.round(i.top+window.scrollY),r=Math.round(i.width),i=Math.round(i.height),a=!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length),d=getUniqueSelector(d),o=(e.pageX-t)/r,e=(e.pageY-n)/i,a={timestamp:(new Date).toISOString(),visible:a,erx:o,ery:e,s:d,l:t,t:n,w:r,h:i},s.push(a),10<=s.length&&c())})}}else console.error("Heatpeek: Project ID is required")})();