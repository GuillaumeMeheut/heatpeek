function getViewportDeviceCategory(){var e=window.innerWidth;const t=768,n=1024,i=1920;return e<=t?"mobile":e<=n?"tablet":e<=i?"desktop":"large-desktop"}function getUniqueSelector(t){if(t.id)return"#"+CSS.escape(t.id);for(var n=[];t&&t.nodeType===Node.ELEMENT_NODE;){let e=t.nodeName.toLowerCase();t.className&&(o=Array.from(t.classList).map(e=>"."+CSS.escape(e)).join(""),e+=o);var i,o=t.parentElement;o&&1<(i=Array.from(o.children).filter(e=>e.tagName===t.tagName)).length&&(i=i.indexOf(t)+1,e+=`:nth-of-type(${i})`),n.unshift(e),t=t.parentElement}return generateShortHash(n.join(" > "))}function generateShortHash(t){let n=0;for(let e=0;e<t.length;e++){var i=t.charCodeAt(e);n=(n<<5)-n+i,n&=n}return Math.abs(n).toString(36).substring(0,8)}(()=>{let n=document.currentScript.getAttribute("id"),i="https://heatpeek.com/api/e";if(n){let t=getViewportDeviceCategory();if("large-desktop"!==t){let s=0,c=0,l=[];window.addEventListener("hashchange",function(){a(!0)});var o,e,r=window.history;function a(e){var t=location.pathname;e&&o===t||(o=t,c=0)}function h(){var e;0!==l.length&&(e=JSON.stringify({trackingId:n,url:window.location.href,device:t,events:l.splice(0,l.length)}),navigator.sendBeacon?navigator.sendBeacon(i,e):fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:e}).catch(e=>{console.error("Heatpeek: Error sending click data:",e)}))}r.pushState&&(e=r.pushState,r.pushState=function(){e.apply(this,arguments),a(!0)},window.addEventListener("popstate",function(){a(!0)})),"hidden"===document.visibilityState||"prerender"===document.visibilityState?document.addEventListener("visibilitychange",function(){o||"visible"!==document.visibilityState||a(!1)}):a(!1),window.addEventListener("pageshow",function(e){e.persisted&&a(!1)}),setInterval(h,5e3),window.addEventListener("beforeunload",h),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&h()}),document.addEventListener("click",e=>{var t,n,i,o,r,a,d=Date.now();d-s<500||(s=d,o=(d=e.target).getBoundingClientRect(),t=Math.round(o.left+window.scrollX),n=Math.round(o.top+window.scrollY),i=Math.round(o.width),o=Math.round(o.height),a=!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length),d=getUniqueSelector(d),r=(e.pageX-t)/i,e=(e.pageY-n)/o,a={timestamp:(new Date).toISOString(),visible:a,erx:r,ery:e,s:d,l:t,t:n,w:i,h:o,firstClickRank:c<3?c+1:null},l.push(a),c++,10<=l.length&&h())})}}else console.error("Heatpeek: Project ID is required")})();