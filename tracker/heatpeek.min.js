function getViewportDeviceCategory(){var e=window.innerWidth;const t=768,r=1024,n=1920;return e<=t?"mobile":e<=r?"tablet":e<=n?"desktop":"large-desktop"}function getUniqueSelector(t){if(t.id)return"#"+CSS.escape(t.id);for(var r=[];t&&t.nodeType===Node.ELEMENT_NODE;){let e=t.nodeName.toLowerCase();t.className&&(o=Array.from(t.classList).map(e=>"."+CSS.escape(e)).join(""),e+=o);var n,o=t.parentElement;o&&1<(n=Array.from(o.children).filter(e=>e.tagName===t.tagName)).length&&(n=n.indexOf(t)+1,e+=`:nth-of-type(${n})`),r.unshift(e),t=t.parentElement}return generateShortHash(r.join(" > "))}function generateShortHash(t){let r=0;for(let e=0;e<t.length;e++){var n=t.charCodeAt(e);r=(r<<5)-r+n,r&=r}return Math.abs(r).toString(36).substring(0,8)}(()=>{let s=document.currentScript.getAttribute("id"),g="http://localhost:3000/api/trackClick";if(s){let d=getViewportDeviceCategory();if("large-desktop"!==d){let l=0;document.addEventListener("click",e=>{var t,r,n,o,a,i,c=Date.now();c-l<500||(l=c,o=(c=e.target).getBoundingClientRect(),t=Math.round(o.left+window.scrollX),r=Math.round(o.top+window.scrollY),n=Math.round(o.width),o=Math.round(o.height),a=!!(c.offsetWidth||c.offsetHeight||c.getClientRects().length),c=getUniqueSelector(c),i=(e.pageX-t)/n,e=(e.pageY-r)/o,a={trackingId:s,url:window.location.href,timestamp:(new Date).toISOString(),device:d,visible:a,erx:i,ery:e,s:c,l:t,t:r,w:n,h:o},i=JSON.stringify(a),navigator.sendBeacon?navigator.sendBeacon(g,i):fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:i}).catch(e=>{console.error("Heatpeek: Error sending click data:",e)}))})}}else console.error("Heatpeek: Project ID is required")})();