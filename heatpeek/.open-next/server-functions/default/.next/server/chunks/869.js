exports.id=869,exports.ids=[869],exports.modules={65889:(e,r,t)=>{Promise.resolve().then(t.bind(t,17171)),Promise.resolve().then(t.bind(t,43221)),Promise.resolve().then(t.bind(t,55233))},41096:(e,r,t)=>{"use strict";var s,a;t.d(r,{S:()=>a,c:()=>s}),function(e){e.Clicks="clicks",e.RageClicks="rage_clicks",e.ScrollDepth="scroll_depth"}(s||(s={})),function(e){e.Desktop="desktop",e.Tablet="tablet",e.Mobile="mobile"}(a||(a={}))},17171:(e,r,t)=>{"use strict";t.d(r,{FiltersDate:()=>l});var s=t(10326),a=t(29280),i=t(71475);function l(){let e=(0,i.QT)();return(0,s.jsxs)(a.Ph,{defaultValue:"1d",children:[s.jsx(a.i4,{className:"w-[140px]",children:s.jsx(a.ki,{})}),(0,s.jsxs)(a.Bw,{children:[s.jsx(a.Ql,{value:"1d",children:e("filters.last24hours")}),s.jsx(a.Ql,{value:"7d",children:e("filters.last7days")}),s.jsx(a.Ql,{value:"30d",children:e("filters.last30days")}),s.jsx(a.Ql,{value:"90d",children:e("filters.last90days")})]})]})}},43221:(e,r,t)=>{"use strict";t.d(r,{FiltersDevice:()=>x});var s,a=t(10326),i=t(35047),l=t(17577),n=t(2634),o=t(52069),c=t(83495),d=t(46763),u=t(51223),p=t(40023);let h=(0,t(79360).j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});l.forwardRef(({className:e,variant:r,size:t,...s},i)=>a.jsx(p.f,{ref:i,className:(0,u.cn)(h({variant:r,size:t,className:e})),...s})).displayName=p.f.displayName;let m=l.createContext({size:"default",variant:"default"}),f=l.forwardRef(({className:e,variant:r,size:t,children:s,...i},l)=>a.jsx(d.fC,{ref:l,className:(0,u.cn)("flex items-center justify-center gap-1",e),...i,children:a.jsx(m.Provider,{value:{variant:r,size:t},children:s})}));f.displayName=d.fC.displayName;let g=l.forwardRef(({className:e,children:r,variant:t,size:s,...i},n)=>{let o=l.useContext(m);return a.jsx(d.ck,{ref:n,className:(0,u.cn)(h({variant:o.variant||t,size:o.size||s}),e),...i,children:r})});g.displayName=d.ck.displayName;var v=t(41096);function x(){let e=(0,i.useRouter)(),r=(0,i.useSearchParams)(),t=(0,i.usePathname)().includes("/dashboard"),d=r.get("device")||(t?"all":s.Desktop),[u,p]=(0,l.useState)(d);return(0,a.jsxs)(f,{type:"single",variant:"outline",value:u,onValueChange:a=>{let i=a||(t?"all":s.Desktop);p(i);let l=new URLSearchParams(r.toString());l.set("device",i),e.replace(`?${l.toString()}`)},children:[t&&a.jsx(g,{value:"all",children:"All"}),a.jsx(g,{value:s.Desktop,children:a.jsx(n.Z,{className:"h-4 w-4"})}),a.jsx(g,{value:s.Tablet,children:a.jsx(o.Z,{className:"h-4 w-4"})}),a.jsx(g,{value:s.Mobile,children:a.jsx(c.Z,{className:"h-4 w-4"})})]})}!function(e){e.All="all",e[e.Desktop=v.S.Desktop]="Desktop",e[e.Tablet=v.S.Tablet]="Tablet",e[e.Mobile=v.S.Mobile]="Mobile"}(s||(s={}))},55233:(e,r,t)=>{"use strict";t.d(r,{FiltersUrl:()=>m});var s=t(10326),a=t(29280),i=t(41190),l=t(35047),n=t(17577),o=t(91664),c=t(83855),d=t(88378),u=t(90434),p=t(71475),h=t(78062);function m({urls:e,projectId:r}){let t=(0,l.useRouter)(),m=(0,l.usePathname)(),f=(0,l.useSearchParams)(),g=f.get("url"),[v,x]=(0,n.useState)(g||"all"),b=(0,p.QT)(),w=m.includes("/dashboard");(0,n.useCallback)(e=>{x(e);let r=new URLSearchParams(f.toString());r.set("url",e),t.replace(`?${r.toString()}`)},[f,t]);let j=e=>e.label?`${e.label} (${e.path})`:e.path;return s.jsx("div",{className:"flex items-center gap-2",children:(0,s.jsxs)(a.Ph,{value:v,onValueChange:e=>{x(e);let r=new URLSearchParams(f.toString());"all"===e?r.delete("url"):r.set("url",e),t.replace(`?${r.toString()}`)},defaultValue:v,children:[s.jsx(a.i4,{className:"w-[170px]",children:s.jsx(a.ki,{})}),(0,s.jsxs)(a.Bw,{children:[(0,s.jsxs)("div",{className:"px-2 p-2 grid grid-cols-2 gap-2 w-full",children:[(0,s.jsxs)(o.z,{size:"sm",variant:"outline",children:[s.jsx(c.Z,{className:"w-4 h-4 "}),b("filters.new")]}),s.jsx(u.default,{href:`/${r}/manage-urls`,children:(0,s.jsxs)(o.z,{size:"sm",variant:"outline",children:[s.jsx(d.Z,{className:"w-4 h-4 "}),b("filters.manage")]})})]}),s.jsx("div",{className:"px-2 ",children:s.jsx(i.I,{placeholder:b("filters.searchPages")})}),s.jsx(h.Z,{className:"my-2"}),w&&s.jsx(a.Ql,{value:"all",children:b("filters.allPages")}),s.jsx(h.Z,{className:"my-2"}),e?.map(e=>s.jsx(a.Ql,{value:e.path,children:j(e)},e.id))]})]})})}},41190:(e,r,t)=>{"use strict";t.d(r,{I:()=>l});var s=t(10326),a=t(17577),i=t(51223);let l=a.forwardRef(({className:e,type:r,...t},a)=>s.jsx("input",{type:r,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...t}));l.displayName="Input"},78062:(e,r,t)=>{"use strict";t.d(r,{Z:()=>n});var s=t(10326),a=t(17577),i=t(90220),l=t(51223);let n=a.forwardRef(({className:e,orientation:r="horizontal",decorative:t=!0,...a},n)=>s.jsx(i.f,{ref:n,decorative:t,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",e),...a}));n.displayName=i.f.displayName},98666:(e,r,t)=>{"use strict";var s,a;t.d(r,{S:()=>a,c:()=>s}),function(e){e.Clicks="clicks",e.RageClicks="rage_clicks",e.ScrollDepth="scroll_depth"}(s||(s={})),function(e){e.Desktop="desktop",e.Tablet="tablet",e.Mobile="mobile"}(a||(a={}))},98502:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(19510),a=t(27039),i=t(90071),l=t(50657),n=t(65655),o=t(538),c=t(68570);let d=(0,c.createProxy)(String.raw`/Users/guillaume/Documents/perso/heatpeek-project/heatpeek/src/components/Filters/FiltersUrl.tsx#FiltersUrl`),u=(0,c.createProxy)(String.raw`/Users/guillaume/Documents/perso/heatpeek-project/heatpeek/src/components/Filters/FiltersDate.tsx#FiltersDate`);(0,c.createProxy)(String.raw`/Users/guillaume/Documents/perso/heatpeek-project/heatpeek/src/components/Filters/FiltersDevice.tsx#FilterDeviceEnum`);let p=(0,c.createProxy)(String.raw`/Users/guillaume/Documents/perso/heatpeek-project/heatpeek/src/components/Filters/FiltersDevice.tsx#FiltersDevice`);async function h({projectId:e}){let r=(0,n.e)(),t=await (0,o.Um)(r,e);return(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6 border-b  pb-6 items-center",children:[s.jsx(i.Z,{className:"w-4 h-4 text-muted-foreground"}),s.jsx(d,{urls:t,projectId:e}),s.jsx(u,{}),s.jsx(p,{}),s.jsx("div",{className:"ml-auto",children:(0,s.jsxs)(a.z,{className:"bg-primary hover:bg-primary/90",children:[s.jsx(l.Z,{className:"w-4 h-4 mr-2"}),"Export"]})})]})}async function m({params:e,children:r}){let{id:t}=await e;return(0,s.jsxs)(s.Fragment,{children:[s.jsx(h,{projectId:t}),r]})}},27039:(e,r,t)=>{"use strict";t.d(r,{z:()=>c});var s=t(19510),a=t(71159),i=t(43025),l=t(46145),n=t(40644);let o=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,...l},c)=>{let d=a?i.g7:"button";return s.jsx(d,{className:(0,n.cn)(o({variant:r,size:t,className:e})),ref:c,...l})});c.displayName="Button"},93804:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>n,SZ:()=>c,Zb:()=>l,aY:()=>d,ll:()=>o});var s=t(19510),a=t(71159),i=t(40644);let l=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));l.displayName="Card";let n=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));n.displayName="CardHeader";let o=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle";let c=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let d=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...r}));d.displayName="CardContent",a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},6351:(e,r,t)=>{"use strict";t.d(r,{Bc:()=>l,SO:()=>o,Vh:()=>i,cr:()=>d,i7:()=>c,u_:()=>n});var s=t(38408);let a=()=>(0,s.eI)({url:process.env.CLICKHOUSE_URL,username:process.env.CLICKHOUSE_USERNAME,password:process.env.CLICKHOUSE_PASSWORD}),i=async({trackingId:e,path:r,snapshotId:t,device:s,browser:i})=>{let l=a(),n=["tracking_id = {trackingId:String}","path = {path:String}","snapshot_id = {snapshotId:UUID}"];s&&n.push("device = {device:String}"),i&&n.push("browser = {browser:String}");let o=`
    SELECT erx,ery,selector
    FROM raw_clicks
    WHERE ${n.join(" AND ")}
  `,c=await l.query({query:o,format:"JSON",query_params:{trackingId:e,path:r,snapshotId:t,device:s,browser:i}});return(await c.json()).data},l=async({trackingId:e,path:r,snapshotId:t,device:s,browser:i})=>{let l=a(),n=["tracking_id = {trackingId:String}","path = {path:String}","snapshot_id = {snapshotId:UUID}"];s&&n.push("device = {device:String}"),i&&n.push("browser = {browser:String}");let o=`
    SELECT erx,ery,selector
    FROM raw_rage_clicks
    WHERE ${n.join(" AND ")}
  `,c=await l.query({query:o,format:"JSON",query_params:{trackingId:e,path:r,snapshotId:t,device:s,browser:i}});return(await c.json()).data},n=async({trackingId:e,path:r,snapshotId:t,device:s,browser:i})=>{let l=a(),n=["tracking_id = {trackingId:String}","path = {path:String}","snapshot_id = {snapshotId:UUID}"];s&&n.push("device = {device:String}"),i&&n.push("browser = {browser:String}");let o=`
 SELECT
  scroll_depth,
  count() AS total_views
  FROM raw_scroll_depth
  WHERE ${n.join(" AND ")}
  GROUP BY scroll_depth
`,c=await l.query({query:o,format:"JSON",query_params:{trackingId:e,path:r,snapshotId:t,device:s,browser:i}});return(await c.json()).data.map(e=>({scroll_depth:Number(e.scroll_depth),views:Number(e.total_views)}))},o=async({trackingId:e,path:r,device:t,browser:s})=>{let i=a(),l=["tracking_id = {trackingId:String}"];r&&"all"!==r&&l.push("path = {path:String}"),t&&"all"!==t&&l.push("device = {device:String}"),s&&l.push("browser = {browser:String}");let n=`
    SELECT sum(views) AS total_views
    FROM aggregated_pageviews
    WHERE ${l.join(" AND ")}
  `,o=await i.query({query:n,format:"JSON",query_params:{trackingId:e,path:r,device:t,browser:s}}),c=(await o.json()).data;return Number(c?.[0]?.total_views)||0},c=async({trackingId:e,path:r,device:t,browser:s})=>{let i=a(),l=["tracking_id = {trackingId:String}"];r&&"all"!==r&&l.push("path = {path:String}"),t&&"all"!==t&&l.push("device = {device:String}"),s&&l.push("browser = {browser:String}");let n=`
    SELECT count() AS click_count
    FROM raw_clicks
    WHERE ${l.join(" AND ")}
  `,o=await i.query({query:n,format:"JSON",query_params:{trackingId:e,path:r,device:t,browser:s}}),c=(await o.json()).data;return Number(c?.[0]?.click_count)||0},d=async({trackingId:e,path:r,device:t,browser:s})=>{let i=a(),l=["tracking_id = {trackingId:String}"];r&&"all"!==r&&l.push("path = {path:String}"),t&&"all"!==t&&l.push("device = {device:String}"),s&&l.push("browser = {browser:String}");let n=`
   SELECT
      round(sum(scroll_depth) / count(), 2) AS avg_scroll_depth
          FROM raw_scroll_depth
    WHERE ${l.join(" AND ")}
  `,o=await i.query({query:n,format:"JSON",query_params:{trackingId:e,path:r,device:t,browser:s}}),c=(await o.json()).data;return Number(c?.[0]?.avg_scroll_depth)||0}},40644:(e,r,t)=>{"use strict";t.d(r,{EM:()=>d,KW:()=>c,cn:()=>i,eN:()=>u,yV:()=>l});var s=t(55761),a=t(62386);function i(...e){return(0,a.m6)((0,s.W)(e))}let l=e=>{try{let r=new URL(e);return`${r.protocol}//${r.host}`}catch{return e}},n={status:["status","status_description"],error:["error","error_description"],success:["success","success_description"]},o=(e,r,t,s="",a="")=>{let[i,l]=n[r],o=e.includes("?"),c=`${e}${o?"&":"?"}${i}=${encodeURIComponent(t)}`;return s&&(c+=`&${l}=${encodeURIComponent(s)}`),a&&(c+=`&${a}`),c},c=(e,r,t="",s="")=>o(e,"status",r,t,s),d=(e,r,t="",s="")=>o(e,"error",r,t,s);function u(){return{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, OPTIONS","Access-Control-Allow-Headers":"Content-Type, Authorization"}}}};